
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: tykoasapidefinitions.tyk.tyk.io
spec:
  group: tyk.tyk.io
  names:
    categories:
    - tyk
    kind: TykOasApiDefinition
    listKind: TykOasApiDefinitionList
    plural: tykoasapidefinitions
    shortNames:
    - tykoas
    singular: tykoasapidefinition
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.domain
      name: Domain
      type: string
    - jsonPath: .status.listenPath
      name: ListenPath
      type: string
    - jsonPath: .status.targetURL
      name: Proxy.TargetURL
      type: string
    - jsonPath: .status.enabled
      name: Enabled
      type: boolean
    - jsonPath: .status.latestTransaction.status
      name: SyncStatus
      type: string
    - jsonPath: .status.ingressTemplate
      name: IngressTemplate
      type: boolean
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: TykOasApiDefinition is the Schema for the tykoasapidefinitions
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: TykOasApiDefinitionSpec defines the desired state of TykOasApiDefinition
            properties:
              clientCertificate:
                description: ClientCertificate is used to configure client certificates
                  settings needed for MTLS connection between Tyk and client. It is
                  used to set `server.clientCertificate` field of Tyk OAS API
                properties:
                  allowlist:
                    description: Allowlist stores list of k8s secret names storing
                      client certificates
                    items:
                      type: string
                    type: array
                  enabled:
                    description: Enabled activates mTLS for the API.
                    type: boolean
                type: object
              contextRef:
                description: Context specify namespace/name of the OperatorContext
                  object used for reconciling this APIDefinition
                properties:
                  kind:
                    description: LinkedApiKind represents the Kubernetes kind of the
                      API Definition resource that is being target by current resource.
                    enum:
                    - ApiDefinition
                    - TykOasApiDefinition
                    type: string
                  name:
                    description: k8s resource name
                    type: string
                  namespace:
                    description: The k8s namespace of the resource being targeted.
                      When omitted this will be set to the namespace of the object
                      that is being reconciled.
                    type: string
                required:
                - name
                type: object
              tykOAS:
                description: TykOAS provides storage information about Tyk OAS
                properties:
                  configmapRef:
                    description: ConfigmapRef provides information of configmap in
                      which Tyk OAS is stored
                    properties:
                      keyName:
                        description: KeyName is the key of configmap in which Tyk
                          OAS doc is stored
                        type: string
                      name:
                        description: Name is the name of configmap
                        type: string
                      namespace:
                        description: Namespace is the namespace of configmap. If Namespace
                          is not provided, we assume that the ConfigMap is in the
                          same namespace as TykOasApiDefinition resource.
                        type: string
                    required:
                    - keyName
                    - name
                    type: object
                required:
                - configmapRef
                type: object
              versioning:
                description: Versioning provides versioning information about this
                  OAS API
                properties:
                  default:
                    description: Default contains the default version name if a request
                      is issued without a version.
                    type: string
                  enabled:
                    description: Enabled is a boolean flag, if set to true it will
                      enable versioning of the API.
                    type: boolean
                  key:
                    description: Key contains the name of the key to check for versioning
                      information.
                    type: string
                  location:
                    description: 'Location contains versioning location information.
                      It can be one of the following: header, url-param, url.'
                    enum:
                    - header
                    - url-param
                    - url
                    type: string
                  name:
                    description: Name contains the name of the version.
                    type: string
                  versions:
                    description: Versions contains a list of versions that map to
                      individual API IDs.
                    items:
                      description: TykOASVersion represents each OAS API Definition
                        used as a version.
                      properties:
                        name:
                          description: Name contains the name of the refrenced TykOasApiDefinition.
                          type: string
                        namespace:
                          description: Namespace contains the namespace where the
                            version was installed.
                          type: string
                        tykOasApiDefinitionRef:
                          description: TykOasApiDefinitionRef references a TykOasApiDefinition.
                          type: string
                      required:
                      - name
                      - tykOasApiDefinitionRef
                      type: object
                    type: array
                required:
                - default
                - enabled
                - key
                - location
                - name
                type: object
            required:
            - tykOAS
            type: object
          status:
            description: TykOasApiDefinitionStatus defines the observed state of TykOasApiDefinition
            properties:
              domain:
                description: Domain is the custom domain used by the API
                type: string
              enabled:
                description: Enabled represents if API is enabled or not
                type: boolean
              id:
                description: ID is the unique identifier of the API within Tyk.
                type: string
              ingressTemplate:
                description: IngressTemplate shows whether this CR is used as Ingress
                  Template or not.
                type: boolean
              latestCRDSpecHash:
                description: LatestCRDSpecHash stores the hash of TykOasApiDefinition
                  CR created on K8s. This information is updated after creating or
                  updating the TykOasApiDefinition. It is useful for Operator to understand
                  the need for running update operation or not. If there is a change
                  in latestCRDSpecHash as well as latestTykSpecHash, Operator runs
                  update logic and updates resources on Tyk Gateway or Tyk Dashboard.
                type: string
              latestConfigMapHash:
                description: LatestConfigMapHash stores the hash of ConfigMap that
                  is being used by TykOasApiDefinition.
                type: string
              latestTransaction:
                description: LatestTransaction provides status information about the
                  last reconciliation.
                properties:
                  error:
                    description: Error corresponds to the error happened on Tyk API
                      level, if any.
                    type: string
                  status:
                    description: Status corresponds to the status of the last transaction.
                    type: string
                  time:
                    description: Time corresponds to the time of last transaction.
                    format: date-time
                    type: string
                type: object
              latestTykSpecHash:
                description: LatestTykSpecHash stores the hash of OAS API Definition
                  created on Tyk. This information is updated after creating or updating
                  the TykOasApiDefinition. It is useful for Operator to understand
                  the need for running update operation or not. If there is a change
                  in latestTykSpecHash as well as latestCRDSpecHash, Operator runs
                  update logic and updates resources on Tyk Gateway or Tyk Dashboard.
                type: string
              linkedByPolicies:
                description: LinkedByPolicies is a list policies that references this
                  OAS API Definition.
                items:
                  properties:
                    kind:
                      description: LinkedApiKind represents the Kubernetes kind of
                        the API Definition resource that is being target by current
                        resource.
                      enum:
                      - ApiDefinition
                      - TykOasApiDefinition
                      type: string
                    name:
                      description: k8s resource name
                      type: string
                    namespace:
                      description: The k8s namespace of the resource being targeted.
                        When omitted this will be set to the namespace of the object
                        that is being reconciled.
                      type: string
                  required:
                  - name
                  type: object
                type: array
              listenPath:
                description: ListenPath is the base path on Tyk to which requests
                  for this API will be sent.
                type: string
              name:
                description: Name is the name of the OAS API within Tyk.
                type: string
              targetURL:
                description: TargetURL is the upstream address to which requests will
                  be proxied.
                type: string
              versioningStatus:
                description: VersioningStatus shows the status of a Versioned TykOasAPIDefinition.
                properties:
                  baseAPIVersionContextRef:
                    description: BaseAPIVersionContextRef specifies the namespace
                      and name of the Base API a versioned API is linked to.
                    properties:
                      kind:
                        description: LinkedApiKind represents the Kubernetes kind
                          of the API Definition resource that is being target by current
                          resource.
                        enum:
                        - ApiDefinition
                        - TykOasApiDefinition
                        type: string
                      name:
                        description: k8s resource name
                        type: string
                      namespace:
                        description: The k8s namespace of the resource being targeted.
                          When omitted this will be set to the namespace of the object
                          that is being reconciled.
                        type: string
                    required:
                    - name
                    type: object
                  isDefaultVersion:
                    description: IsDefaultVersion specifies if the OAS API is the
                      default  Version.
                    type: boolean
                  isVersionedAPI:
                    description: IsVersionedAPI indicates if the API is versioned.
                    type: boolean
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
